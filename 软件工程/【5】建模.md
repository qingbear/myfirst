## 建模

什么是建模，客观世界在计算机的反映就是建模

建模是需求和软件制品的桥梁。研发人员通过建模来设计方案并最终指导代码实现，用户通过建模来识别系统是否如他们预期那样的运作。

建模个人倾向于UML建模法，用不来事件风暴。所以这里只会介绍UML建模法。

建模之前，研发工程师是需要确认一下，团队开发用的什么框架，什么风格，这个非常重要。

### 1、建模框架、风格、范式确认

#### 1.1、确认编程框架

以下是一些常见的编程框架：

1. MVC（Model-View-Controller）是一种常用的软件设计模式，主要用于实现用户界面与业务逻辑的分离。在MVC模式中，一个应用程序被划分为三个主要组件：模型（Model）、视图（View）和控制器（Controller）。
2. MVP（Model-View-Presenter）：MVP 是 MVC 的一种变种，主要用于应用的用户界面层。在 MVP 中，Presenter 完全取代了 Controller 的角色，作为 View 和 Model 之间的桥梁。View 只负责显示用户界面，Model 负责数据处理，Presenter 负责从 Model 获取数据并更新 View。
3. MVVM（Model-View-ViewModel）：MVVM 是一种特别适用于现代用户界面开发的设计模式，特别是在使用数据绑定技术的情况下。在 MVVM 中，ViewModel 是 View 和 Model 之间的抽象，它包含了 View 的状态和行为。这种模式允许开发者将 UI 逻辑从视图中分离出来，这样就可以独立于视图进行测试。
4. PAC（Presentation-Abstraction-Control）：PAC 是一种由三层组成的设计模式，主要用于构建用户界面。在 PAC 中，Presentation 负责显示，Abstraction 负责处理数据，Control 负责连接 Presentation 和 Abstraction。PAC 模式的一个主要特点是每个组件都可以有自己的 Control。

以上只是一些常见的编程框架，实际上还有许多其他的设计模式和结构，如 Service Oriented Architecture（SOA）, Microservices Architecture，以及 Event Driven Architecture等。

现在比较流行和比较常用的还有：

1. 微服务架构：微服务是一种将单一应用程序划分为一组小的、独立的服务的架构风格。每个服务都运行在其自身的进程中，服务之间通过轻量级的机制（通常是HTTP资源API）进行通信。每个微服务都围绕特定的业务功能进行构建，并且可以独立地进行扩展和部署。微服务架构可以提高系统的可扩展性、可维护性和可靠性，并且使得团队可以独立地、并行地开发和部署服务。

2. 领域驱动设计（DDD）：DDD 是一种关注核心业务领域和业务逻辑的软件开发方法。它强调的是通过对业务领域的深入理解和在抽象模型中捕获业务领域的知识来驱动设计和实现。DDD 通常包括四个主要的构造：实体（Entity），值对象（Value Object），聚合（Aggregate）和领域事件（Domain Event）。DDD 可以帮助开发者更好地理解业务需求，并将这些需求转化为高质量的软件设计和实现。

3. 六边形架构（Hexagonal Architecture），也被称为端口和适配器模式，是一种应用程序设计模式，旨在帮助我们更好地构建解耦和可测试的系统。

   这种架构模式的主要思想是将应用程序的核心逻辑（业务逻辑）与其周围的软件层（例如UI，数据库，消息系统等）隔离开来。这是通过定义明确的输入/输出端口（Ports）和适配器（Adapters）来实现的

#### 1.2、确认编码风格

1. 贫血模型：在贫血模型中，数据模型只有getter和setter方法，而没有业务逻辑。所有的业务逻辑都放在服务层，这样导致了模型和业务逻辑的分离。这种模式的优点是简单明了，易于理解，缺点是不能充分利用面向对象编程的优势，如封装和多态。
2. 充血模型：在充血模型中，数据模型不仅包含数据，还包含处理数据的业务逻辑。这样可以将数据和与其相关的操作封装在一起，使得模型更加丰富和有表现力。充血模型是领域驱动设计（Domain-Driven Design，DDD）的核心概念，它能够提高代码的可读性和可维护性，更好地表达业务规则。

选择哪种模型取决于你的具体需求。如果你的应用程序的业务逻辑比较简单，贫血模型可能是一个更好的选择。然而，如果你的应用程序的业务逻辑比较复杂，充血模型可能更有用。

#### 1.3、确认编码范式

1. 函数式编程：函数式编程是一种把计算过程尽量写成一系列嵌套的函数调用的编程范式。在函数式编程中，函数被认为是一等公民，这意味着函数可以作为参数传递，也可以作为返回值，甚至可以赋值给变量。函数式编程强调程序的执行结果而不是执行过程，避免使用程序状态以及易变对象。这种范式的主要优点是其纯粹性，使得代码更易于理解和测试。
2. 面向对象编程：面向对象编程是一种编程范式，它使用"对象"：数据结构由数据字段和可以操作数据的方法组成。对象是类的实例，类包括一组有共同属性和方法的对象。面向对象编程的主要特点是数据封装、继承和多态。面向对象编程的主要优点是能够创建可重用的代码和模块化的代码，使得大型和复杂的软件系统更易于理解、设计和维护。
3. 命令式编程：在命令式编程中，程序员会告诉计算机如何去做事情。这是最早的编程范式，大部分低级编程语言都是命令式的。
4. 过程式编程：这是命令式编程的一种类型，强调的是程序的执行流程。过程或者函数是过程式编程的核心，主要关注点是将大问题分解为一系列步骤或过程。
5. 逻辑编程：在逻辑编程中，程序员会告诉计算机应该达到什么样的结果，而具体如何达到这个结果则由编程语言的运行环境决定。Prolog就是一种典型的逻辑编程语言。
6. 声明式编程：声明式编程是一种高层次的编程范式，程序员只需要描述要解决的问题，而无需描述如何解决。SQL就是一种典型的声明式编程语言。
7. 并行编程：并行编程是一种编程范式，它允许多个计算过程在同一时间进行。这种范式旨在最大限度地提高计算机多核和多处理器的性能。
8. 事件驱动编程：在事件驱动编程中，程序的执行流程由外部事件（如用户输入、传感器输出等）决定。这种范式常常被用于图形用户界面、服务器监听等场景。

注意：**以上的东西不需要用户理解和感受，但是建模的时候，是需要让团队小伙伴明确你们的框架、风格和范式。这对建模的影响是很大的**。另外框架、风格、范式，没有绝对的好坏，只要用户能理解，能认可，能如实反馈用户的业务意图，就都是OK的。同一个产品或者模块，最好是保持风格一致。

------

UML建模方法，主要是基于面向对象编程的建模方法，因为它的许多图（如类图、对象图、组合结构图等）都是为了描述面向对象的概念，如类、对象、继承、聚合、关联等。因此，UML在面向对象编程中应用非常广泛。

然而，这并不意味着UML不能用于命令式编程。UML的某些图形，如活动图、状态图、序列图等，可以用来描述流程控制和程序执行顺序，这些都是命令式编程的重要部分。因此，虽然UML在命令式编程中的应用没有在面向对象编程中那么广泛，但它仍然可以用来帮助设计和理解命令式程序

------

### 2、建模
建模其实非常简单。就是把"需求" ->  "对象、关系、属性和动作"（下面说的建模都是采用面向对象的）

#### 2.1、寻找属性和概念类

- **圈出所有名词和名词短语**，不仅仅是主事件流、拓展事件流，包括标题，术语，前置，后置，所有记录下来的都要圈
- 重用和修改现用的模型，这是首要、最佳和最简单的方法。已经存在的领域模型
- 使用分类列表
- 确定名词短语（从用例规约找）

```wiki
如何区分是类还是属性？
    简单准则：如果在现实世界中不是数字或文本，而是一坨东西，那就应该是概念类了
    领域模型中属性的类型更应该是数据类型，不是复杂的领域概念 
    有时候可以定义新的数据类型 任何属性都不表示外键 对数量和单位建模 
    类是有生命周期和动作的（动作可选）
    挖掘隐式类
举例：
    1、经销商、订单、优惠、套餐、商品、商品条码、数量、库存、姓名、电话号码...       哪些是类，哪些是属性？
    2、用户假设下了订单，要买100箱蒙牛牛奶。 要几个类几个属性？
    3、客户的身份证信息可否作为外键，供外部引用？
    4、隐式类的发现？（一个类似乎持有的东西太多了，有些是描述、约束、校验....）
```

#### 2.2、确定关系

添加关联、依赖、组合、聚合、泛化

```wiki
添加关联、依赖：
    1、如果存在需要保持一段时间的关系，“需要记住”；记住要避免加入大量的关联 
    2、关联命名：“类名--动词短语--类名”
    3、双向关联总有点坏味道
    4、关联的多重性能确定的要确定，对业务的理解和后续的实现都很有帮助
举例：
    1、关联和依赖，在业务层面是如何界定的？（你和你女朋友的关系，你和你女朋友的闺蜜的关系）
    2、关联和依赖，在代码层面是如何体现的？（全局变量，局部变量，类变量，对象变量，形参...）
    3、关联命名，“使用”、“拥有”这类的，说了等于没说，对业务的理解也没有太大帮助，尽量要避免
    4、双向关联怎么破？（依赖第三者、限定关联）
    5、举例关联的多重性（客户和订单）
```

```wiki
添加泛化：
   有些关系，用关联和依赖非常别扭，比如蒙牛牛奶和商品， 比如支付方式、支付宝、微信、信用卡，这个时候使用泛化是一种较好的选择
   表示抽象&具体，父亲&儿子的关系
   泛化在业务关系中，通常表现出“is-a”的关系
```

```wiki
犹豫不决时的指引灯塔：
   我们现实世界有类似的例子么？我们人是怎么做的？现实世界是如何工作的？
 
举例：
   1、我需要记录存储全世界所有人口的信息，比如（性别，年龄，家庭地址）
   2、这个事情是它该持有的么？它该做的么？ 比如（蒙牛牛奶和它的优惠折扣）
```

#### 2.3、确定动作

确定动作是稍微有点难度的，需要建模者非常清楚所使用的框架、编程范式和风格

```wiki
行为确定：
   1、行为就是扣动作，关注的是时序流和交互
   2、信息专家很重要
   3、顺序图是确认行为的好工具，需要掌握
```






